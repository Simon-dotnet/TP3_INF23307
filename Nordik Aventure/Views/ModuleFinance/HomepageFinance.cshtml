@{
    Layout = "_FinanceLayout";
}

<div class="container mt-4">
    <h1 class="mb-4">Tableau de bord financier</h1>

    @model List<GestBibli.Objects.ViewModels.OrderHistoryViewModel>

    <!-- Résumé du mois -->
    <section class="mb-5">
        <h3>Résumé du mois</h3>
        <table class="table table-striped table-bordered mt-3">
            <thead>
            <tr>
                <th>Type</th>
                <th>Montant ($)</th>
                <th>Tendance</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Dépenses</td>
                <td>0.00</td>
                <td>0%</td>
            </tr>
            <tr>
                <td>Revenus</td>
                <td>0.00</td>
                <td>0%</td>
            </tr>
            <tr>
                <td>Profit net</td>
                <td>0.00</td>
                <td>0%</td>
            </tr>
            </tbody>
        </table>
    </section>

    <!-- 50 dernières transactions -->
    <section class="mb-5">
        <h3>50 dernières transactions</h3>
        <table class="table table-hover table-bordered mt-3">
            <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Catégorie</th>
                <th>Montant ($)</th>
                <th>Type</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td colspan="5" class="text-center text-muted">Aucune donnée pour l'instant</td>
            </tr>
            </tbody>
        </table>
    </section>

    <!-- Graphique dépenses vs revenus -->
    <section class="mb-5">
        <h3>Dépenses vs Revenus</h3>
        <canvas id="financeChart" height="120"></canvas>
    </section>

    <!-- Bouton rapport -->
    <section class="mt-4 mb-5">
        <form asp-action="GenerateReport" method="post">
            <button type="submit" class="btn btn-primary">Générer un rapport</button>
        </form>
    </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('financeChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Dépenses', 'Revenus'],
            datasets: [{
                label: 'Montant',
                data: [0, 0],
                backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)'],
                borderColor: ['rgb(255, 99, 132)', 'rgb(54, 162, 235)'],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
}
